"use strict";(self["webpackChunkVAMS"]=self["webpackChunkVAMS"]||[]).push([[3],{8544:function(e,t,n){n.d(t,{A:function(){return i}});var a=n(2925),l=n(5586);const o=["#FF5733","#33FF57","#3357FF","#FF33A1","#33FFF5","#FFC300","#DAF7A6","#900C3F","#581845","#C70039","#900C3F","#FF5733","#1A5276","#229954","#AF7AC5","#F39C12","#2980B9","#1ABC9C","#2E4053","#7D3C98","#C0392B","#BDC3C7","#7F8C8D","#34495E","#E74C3C","#8E44AD","#2ECC71","#F1C40F","#3498DB","#E67E22","#16A085","#D35400","#AAB7B8","#ABB2B9","#E59866","#F5B041","#F7DC6F","#1F618D","#F0B27A","#EC7063"];async function i(e,t=!1,n){const i=new a.vK("districtmap").addTo(e);i.setOptions({cursor:"auto"});let s=[];const c=localStorage.getItem("districtmapConfig");if(s=c?JSON.parse(c):(await l.pW.list()).map((e=>({name:e,show:!0}))),t){const t=new a.vK("draw").addTo(e),n=new a.Bk({mode:"Polygon"}).addTo(e).disable();n.on("drawend",(e=>{console.log(e.geometry),t.addGeometry(e.geometry),n.disable()}));const l=["Polygon","Circle","Rectangle"].map((e=>({item:e,click:()=>{t.clear(),n.setMode(e).enable()}})));new a.A4.Toolbar({items:[...l,{item:"Disable",click:()=>n.disable()},{item:"Clear",click:()=>t.clear()}]}).addTo(e)}async function r(){const e=s.map((async(e,t)=>{const n=await l.pW.get(e.name),s=a.kx.toGeometry(n,(e=>{e.setSymbol({lineColor:o[t],lineOpacity:1,lineWidth:1,polygonFill:o[t],polygonOpacity:.7}),e.addTo(i)}));return e.show||s.forEach((e=>e.hide())),{geometry:s,name:e.name}}));return await Promise.all(e)}const u=await r();return{change:({name:e,show:t})=>{const{geometry:n}=u.find((t=>t.name===e));t?n.forEach((e=>e.show())):n.forEach((e=>e.hide()))},selectAll:()=>{u.forEach((e=>{e.geometry.forEach((e=>e.show()))}))},unselectAll:()=>{u.forEach((e=>{e.geometry.forEach((e=>e.hide()))}))}}}},7343:function(e,t,n){n.d(t,{A:function(){return o}});var a=n(2925);function l({center_lat:e,center_lon:t,width:n,height:a}){const l=t-n/2,o=t+n/2,i=e-a/2,s=e+a/2;return[l,i,o,s]}function o(e){const t=new a.vK("bboxLayer");t.addTo(e);const n=new a.PQ("imgLayer");return n.addTo(e),{draw:(o,i)=>{t.clear();const s=a.kx.toGeometry(o.metadata);s[0].addTo(t),t.setOpacity(.5);const c=l(o.metadata.features[0].properties);n.setImages([{url:`/tracing/img/${o.name}/${i}.jpg`,extent:c,opacity:1}]);const{center_lat:r,center_lon:u}=o.metadata.features[0].properties;e.setCenterAndZoom([u,r],13)}}}},7972:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(2925);const l=["#42a7ff","#f6ff42","#ff5542","#3bcc62"],o=["normal","doubt","illegal","loitering"];function i(e){const t=e.getSymbol();t.markerWidth=20,t.markerHeight=40,t.markerDy=20,e.setSymbol(t),e.bringToFront()}function s(e){const t=e.getSymbol();t.markerWidth=10,t.markerHeight=20,t.markerDy=10,e.setSymbol(t),e.bringToBack()}function c(e,t){const n=new a.vK("vessel-layer").addTo(e);let c=null,r=null,u=[];function d({coordinate:e,target:a}){if(a.getId()!==r&&r){const e=n.getGeometryById(r);s(e)}r=a.getId(),t({coord:e,elements:a.getProperties()})}function m({target:e}){i(e)}function g({target:e}){r!==e.getId()&&s(e)}return{highlight:e=>{const t=n.getGeometryById(e);i(t)},normalize:e=>{r=null;const t=n.getGeometryById(e);s(t)},filter:e=>{u=e,c.forEach((t=>{const n=t.getProperties(),a=n.fnf_bool?1:0;e.includes(o[a])?t.show():t.hide()}))},changeDateTime:e=>{n.clear();const t=Array.from(new Map(e.map((e=>[e.vesselid,e]))).values());c=t.map((e=>{const t=e.fnf_bool?1:0;e.fnf_bool||console.log("False value data:",e);const i=new a.pH([e.longitude,e.latitude],{id:e.vesselid,properties:e,symbol:{markerType:"pie",markerFill:l[t],markerFillOpacity:1,markerLineColor:"#000000",markerLineWidth:1,markerLineOpacity:1,markerLineDasharray:[],markerWidth:10,markerHeight:20,markerDx:0,markerDy:10,markerOpacity:1,markerRotation:180-e.cog}}).addTo(n);return i.on("click",d),i.on("mouseenter",m),i.on("mouseout",g),u.length?u.includes(o[t])?i.show():i.hide():e.fnf_bool?i.show():i.hide(),i}))}}}},2003:function(e,t,n){n.d(t,{A:function(){return f}});var a=n(6768),l=n(5130),o=n(4232),i=n(144),s=n(5586);const c={key:0},r={class:"title d-flex a-i-center"},u={class:"list d-flex"},d=["id","onUpdate:modelValue"],m=["for"];var g={__name:"DistrictmapConfig",props:{show:{type:Boolean,require:!0}},emits:["districtmapconfig:change","districtmapconfig:selectall","districtmapconfig:unselectall"],setup(e,{emit:t}){const n=["#FF5733","#33FF57","#3357FF","#FF33A1","#33FFF5","#FFC300","#DAF7A6","#900C3F","#581845","#C70039","#900C3F","#FF5733","#1A5276","#229954","#AF7AC5","#F39C12","#2980B9","#1ABC9C","#2E4053","#7D3C98","#C0392B","#BDC3C7","#7F8C8D","#34495E","#E74C3C","#8E44AD","#2ECC71","#F1C40F","#3498DB","#E67E22","#16A085","#D35400","#AAB7B8","#ABB2B9","#E59866","#F5B041","#F7DC6F","#1F618D","#F0B27A","#EC7063"],g=e,v=t,p=(0,i.KR)([]);function f({target:e}){localStorage.setItem("districtmapConfig",JSON.stringify(p.value)),v("districtmapconfig:change",{name:e.id,show:e._modelValue})}function k(){p.value.forEach((e=>{e.show=!0})),localStorage.setItem("districtmapConfig",JSON.stringify(p.value)),v("districtmapconfig:selectall")}function h(){p.value.forEach((e=>{e.show=!1})),localStorage.setItem("districtmapConfig",JSON.stringify(p.value)),v("districtmapconfig:unselectall")}return(0,a.sV)((async()=>{const e=localStorage.getItem("districtmapConfig");p.value=e?JSON.parse(e):(await s.pW.list()).map((e=>({name:e,show:!0})))})),(e,t)=>{const i=(0,a.g2)("f-a-icon");return(0,a.uX)(),(0,a.Wv)(l.eB,{name:"slide"},{default:(0,a.k6)((()=>[g.show?((0,a.uX)(),(0,a.CE)("section",c,[(0,a.Lk)("div",r,[(0,a.bF)(i,{icon:"gear"}),(0,a.eW)(" 구역도 설정 ")]),(0,a.Lk)("div",{class:"all-tools d-flex a-i-center"},[(0,a.Lk)("button",{onClick:k},"전체 선택"),(0,a.Lk)("button",{onClick:h},"전체 해제")]),(0,a.Lk)("div",u,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(p.value,((e,i)=>((0,a.uX)(),(0,a.CE)("div",{key:e.name},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:e.name,"onUpdate:modelValue":t=>e.show=t,onChange:f,onFocus:t[0]||(t[0]=e=>e.preventDefault())},null,40,d),[[l.lH,e.show]]),(0,a.Lk)("label",{class:(0,o.C4)([e.show?"checked":"","d-flex","j-c-center","a-i-center"]),for:e.name},[(0,a.eW)((0,o.v_)(e.name)+" ",1),(0,a.Lk)("div",{style:(0,o.Tr)({background:n[i],width:"10px",height:"10px",borderRadius:"5px",marginLeft:"5px"})},null,4)],10,m)])))),128))])])):(0,a.Q3)("",!0)])),_:1})}}},v=n(1241);const p=(0,v.A)(g,[["__scopeId","data-v-0a348c25"]]);var f=p},960:function(e,t,n){n.r(t),n.d(t,{default:function(){return ye}});var a=n(6768),l=n(144),o=n(4232);const i=e=>((0,a.Qi)("data-v-4dcf0057"),e=e(),(0,a.jt)(),e),s={id:"toolbar",class:"d-flex"},c={class:"d-flex tools"},r={class:"districtmap-config d-flex"},u=i((()=>(0,a.Lk)("div",{class:"divider"},null,-1))),d={class:"section-list d-flex"},m=["onClick","disabled"],g=i((()=>(0,a.Lk)("div",{class:"divider"},null,-1))),v={class:"section-list d-flex"},p=["onClick"],f=i((()=>(0,a.Lk)("button",{class:"direct-service"},"빠른 서비스 창",-1)));var k={__name:"ToolBar",emits:["section:change","trenchmap:change","districtmapconfig:toggle"],setup(e,{emit:t}){const n=t,i=(0,l.KR)(""),k=[{name:"인천항"},{name:"부산항"},{name:"목포항"}];function h(e){i.value=e,n("section:change",e)}const C=(0,l.KR)("big"),y=[{name:"대해구도",value:"big"},{name:"소해구도",value:"small"},{name:"없음",value:null}];function b(e){C.value=e,n("trenchmap:change",e)}return(e,t)=>((0,a.uX)(),(0,a.CE)("section",s,[(0,a.Lk)("div",c,[(0,a.Lk)("div",r,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n("districtmapconfig:toggle"))},"구역도 설정")]),u,(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(y,(e=>(0,a.Lk)("button",{key:e.name,onClick:t=>b(e.value),class:"trenchmap",disabled:C.value===e.value},(0,o.v_)(e.name),9,m))),64))]),g,(0,a.Lk)("div",v,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(k,(e=>(0,a.Lk)("button",{key:e.name,onClick:t=>h(e.name)},(0,o.v_)(e.name),9,p))),64))])]),f]))}},h=n(1241);const C=(0,h.A)(k,[["__scopeId","data-v-4dcf0057"]]);var y=C,b=n(8910),F=n(5528),A=n(8544),w=n(7343),L=n(7972),D=n(5586);const E={id:"map",class:"map"};var _={__name:"MainMap",emits:["info:show"],setup(e,{expose:t,emit:n}){const l=n;let o=null,i=null,s=null,c=null,r=null;(0,a.sV)((async()=>{o=(0,b.A)(),i=await(0,F.A)(o),s=await(0,A.A)(o),c=(0,w.A)(o),r=(0,L.A)(o,d);const e=await D.X_.getData(20240310014e3,20240310015e3);r.changeDateTime(e)}));const u={"인천항":[126.6246844,37.4589868],"목포항":[126.383362,34.780277],"부산항":[129.0430982,35.1020946]};function d({coord:e,elements:t,isChild:n}){o.animateTo({zoom:10,center:[e.x,e.y]},{duration:500,easing:"out"}),l("info:show",t,n)}return t({changeCenter:e=>{o.animateTo({center:u[e],zoom:10},{duration:500,easing:"out"})},changeTrenchmap:e=>{i.change(e)},changeDistrictmapConfig:e=>{s.change(e)},onSelectAllDistrict:()=>{s.selectAll()},onUnselectAllDistrict:()=>{s.unselectAll()},highlight:e=>{r.highlight(e)},normalize:e=>{r.normalize(e)},displayImg:(e,t)=>{c.draw(e,t)}}),(e,t)=>((0,a.uX)(),(0,a.CE)("div",E))}};const x=(0,h.A)(_,[["__scopeId","data-v-3ddfb350"]]);var B=x,I=n(3002),V=n(2003),R=n(5017);const T=e=>((0,a.Qi)("data-v-aba243f4"),e=e(),(0,a.jt)(),e),K={class:"header d-flex a-i-center"},S=["disabled"],X=["disabled"],O={class:"container"},W={key:0,class:"content d-flex"},H={key:0,class:"v-info d-flex a-i-center"},M=T((()=>(0,a.Lk)("span",null,"대상 선박",-1))),P={key:1,class:"v-info d-flex a-i-center"},Q=T((()=>(0,a.Lk)("span",null,"MMSI",-1))),U={key:2,class:"v-info d-flex a-i-center"},j=T((()=>(0,a.Lk)("span",null,"선택된 선박이 없습니다.",-1))),G=T((()=>(0,a.Lk)("span",null,null,-1))),z=[j,G],J={key:1,class:"content"},N={class:"content"},$=T((()=>(0,a.Lk)("div",null,"과거 위치 기점",-1))),q={class:"content"},Z=T((()=>(0,a.Lk)("div",null,"과거 위치 종점",-1))),Y={class:"content"},ee=T((()=>(0,a.Lk)("div",null,"예측 위치 종점",-1))),te=T((()=>(0,a.Lk)("button",{class:"footer"},"Process",-1)));var ne={__name:"TracingPopup",props:{currentVessel:{type:Object,required:!0}},setup(e){const t=e,n=(0,l.KR)("single"),i=new Date;i.setHours(0),i.setMinutes(0),i.setSeconds(0);const s=(0,l.KR)(new Date(new Date(i).setHours(i.getHours()-3))),c=(0,l.KR)(new Date(i)),r=(0,l.KR)(new Date(new Date(i).setHours(i.getHours()+3)));return(e,i)=>((0,a.uX)(),(0,a.CE)("main",null,[(0,a.Lk)("div",K,[(0,a.Lk)("button",{class:"tab",onClick:i[0]||(i[0]=e=>n.value="single"),disabled:"single"===n.value},"선박 이동경로 예측",8,S),(0,a.Lk)("button",{class:"tab",onClick:i[1]||(i[1]=e=>n.value="multi"),disabled:"multi"===n.value},"다중 선박 이동범위 추정",8,X)]),(0,a.Lk)("div",O,["single"===n.value?((0,a.uX)(),(0,a.CE)("div",W,[t.currentVessel?.shipname?((0,a.uX)(),(0,a.CE)("div",H,[M,(0,a.Lk)("span",null,(0,o.v_)(t.currentVessel.shipname),1)])):(0,a.Q3)("",!0),t.currentVessel?.shipname?((0,a.uX)(),(0,a.CE)("div",P,[Q,(0,a.Lk)("span",null,(0,o.v_)(t.currentVessel.mmsi),1)])):((0,a.uX)(),(0,a.CE)("div",U,z))])):((0,a.uX)(),(0,a.CE)("div",J)),(0,a.Lk)("div",N,[$,(0,a.bF)((0,l.R1)(R.A),{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=e=>s.value=e),"no-today":"","auto-apply":"","max-date":c.value},null,8,["modelValue","max-date"])]),(0,a.Lk)("div",q,[Z,(0,a.bF)((0,l.R1)(R.A),{modelValue:c.value,"onUpdate:modelValue":i[3]||(i[3]=e=>c.value=e),"no-today":"","auto-apply":"","min-date":s.value,"max-date":r.value},null,8,["modelValue","min-date","max-date"])]),(0,a.Lk)("div",Y,[ee,(0,a.bF)((0,l.R1)(R.A),{modelValue:r.value,"onUpdate:modelValue":i[4]||(i[4]=e=>r.value=e),"no-today":"","auto-apply":"","min-date":c.value},null,8,["modelValue","min-date"])])]),te]))}};const ae=(0,h.A)(ne,[["__scopeId","data-v-aba243f4"]]);var le=ae;const oe={class:"main"},ie={class:"info"},se=["title"],ce=["disabled","onClick"],re=["disabled","onClick"],ue=["onClick"],de=["src"];var me={__name:"ImgList",emits:["img:display"],setup(e,{emit:t}){const n=t,i=(0,l.KR)([]),s=(0,l.KR)(""),c=(0,l.KR)("");function r(e,t){"result"!==t&&(s.value=e.name,c.value=t),n("img:display",e,t)}return(0,a.sV)((async()=>{i.value=await D.pV.getList()})),(e,t)=>((0,a.uX)(),(0,a.CE)("section",oe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.value,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"content",key:e.name},[(0,a.Lk)("div",ie,[(0,a.Lk)("div",{class:"title",title:e.name},(0,o.v_)(e.name),9,se),(0,a.Lk)("div",null,[(0,a.Lk)("button",{disabled:s.value===e.name&&"convert"===c.value,onClick:t=>r(e,"convert")},"Show",8,ce),(0,a.Lk)("button",{disabled:s.value===e.name&&"bbox"===c.value,onClick:t=>r(e,"bbox")},"Bbox",8,re),(0,a.Lk)("button",{onClick:t=>r(e,"result"),style:{width:"100px"}},"MV-Tracing",8,ue)])]),(0,a.Lk)("img",{src:`/tracing/img/${e.name}/convert.jpg`,alt:""},null,8,de)])))),128))]))}};const ge=(0,h.A)(me,[["__scopeId","data-v-5f612164"]]);var ve=ge;const pe={class:"content"},fe={key:1,class:"result-popup"},ke=["src"];var he={__name:"TracingView",setup(e){const t=(0,l.KR)(),n=(0,l.KR)(!1),o=(0,l.KR)(!1),i=(0,l.KR)({}),s=(0,l.KR)(!1),c=(0,l.KR)("");function r(e){t.value.changeCenter(e)}function u(e){t.value.changeTrenchmap(e)}function d(e){t.value.changeDistrictmapConfig(e)}function m(){t.value.onSelectAllDistrict()}function g(){t.value.onUnselectAllDistrict()}function v(e,n){"result"===n?(c.value=e.name,s.value=!0):t.value.displayImg(e,n)}function p(e){i.value=e}return(e,f)=>{const k=(0,a.g2)("f-a-icon");return(0,a.uX)(),(0,a.CE)("main",null,[n.value?((0,a.uX)(),(0,a.Wv)((0,l.R1)(I.A),{key:0})):(0,a.Q3)("",!0),(0,a.Lk)("div",pe,[(0,a.bF)((0,l.R1)(V.A),{show:o.value,"onDistrictmapconfig:change":d,"onDistrictmapconfig:selectall":m,"onDistrictmapconfig:unselectall":g},null,8,["show"]),(0,a.bF)((0,l.R1)(y),{"onSection:change":r,"onTrenchmap:change":u,"onDistrictmapconfig:toggle":f[0]||(f[0]=e=>o.value=!o.value)}),(0,a.bF)((0,l.R1)(B),{ref_key:"map",ref:t,"onInfo:show":p,"onData:load":f[1]||(f[1]=e=>n.value=!1)},null,512),(0,a.bF)(le,{currentVessel:i.value},null,8,["currentVessel"]),(0,a.bF)(ve,{"onImg:display":v})]),s.value?((0,a.uX)(),(0,a.CE)("div",fe,[(0,a.Lk)("button",{onClick:f[2]||(f[2]=e=>s.value=!1)},[(0,a.bF)(k,{icon:"x"})]),(0,a.Lk)("img",{src:`/tracing/img/${c.value}/result.png`,alt:""},null,8,ke)])):(0,a.Q3)("",!0)])}}};const Ce=(0,h.A)(he,[["__scopeId","data-v-7372e8ff"]]);var ye=Ce}}]);
//# sourceMappingURL=3.1d1a096d.js.map