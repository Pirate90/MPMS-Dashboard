"use strict";(self["webpackChunkVAMS"]=self["webpackChunkVAMS"]||[]).push([[61],{8544:function(e,t,a){a.d(t,{A:function(){return i}});var n=a(2925),o=a(5586);const l=["#FF5733","#33FF57","#3357FF","#FF33A1","#33FFF5","#FFC300","#DAF7A6","#900C3F","#581845","#C70039","#900C3F","#FF5733","#1A5276","#229954","#AF7AC5","#F39C12","#2980B9","#1ABC9C","#2E4053","#7D3C98","#C0392B","#BDC3C7","#7F8C8D","#34495E","#E74C3C","#8E44AD","#2ECC71","#F1C40F","#3498DB","#E67E22","#16A085","#D35400","#AAB7B8","#ABB2B9","#E59866","#F5B041","#F7DC6F","#1F618D","#F0B27A","#EC7063"];async function i(e,t=!1,a){const i=new n.vK("districtmap").addTo(e);i.setOptions({cursor:"auto"});let c=[];const r=localStorage.getItem("districtmapConfig");if(c=r?JSON.parse(r):(await o.pW.list()).map((e=>({name:e,show:!0}))),t){const t=new n.vK("draw").addTo(e),a=new n.Bk({mode:"Polygon"}).addTo(e).disable();a.on("drawend",(e=>{console.log(e.geometry),t.addGeometry(e.geometry),a.disable()}));const o=["Polygon","Circle","Rectangle"].map((e=>({item:e,click:()=>{t.clear(),a.setMode(e).enable()}})));new n.A4.Toolbar({items:[...o,{item:"Disable",click:()=>a.disable()},{item:"Clear",click:()=>t.clear()}]}).addTo(e)}async function s(){const e=c.map((async(e,t)=>{const a=await o.pW.get(e.name),c=n.kx.toGeometry(a,(e=>{e.setSymbol({lineColor:l[t],lineOpacity:1,lineWidth:1,polygonFill:l[t],polygonOpacity:.7}),e.addTo(i)}));return e.show||c.forEach((e=>e.hide())),{geometry:c,name:e.name}}));return await Promise.all(e)}const u=await s();return{change:({name:e,show:t})=>{const{geometry:a}=u.find((t=>t.name===e));t?a.forEach((e=>e.show())):a.forEach((e=>e.hide()))},selectAll:()=>{u.forEach((e=>{e.geometry.forEach((e=>e.show()))}))},unselectAll:()=>{u.forEach((e=>{e.geometry.forEach((e=>e.hide()))}))}}}},4606:function(e,t,a){a.d(t,{A:function(){return c}});var n=a(2925);function o(e,t){return e/Math.pow(2,t)*360-180}function l(e,t){const a=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)))}function i(e,t,a){const n=e.coordinateToPoint(t,a),o=Math.floor(n.x/256),l=Math.floor(n.y/256);return{x:o,y:l}}function c(e){const t=new n.eZ("SAR",{urlTemplate:(e,t,a)=>{const i=Math.pow(2,a)-1-t,c=o(e,a),r=o(e+1,a),s=l(t+1,a),u=l(t,a),d=new n.zR(c,s,r,u),m=new n.zR(127.9570494235744,34.51262151047193,128.323360579194,34.7647814887019);return m.intersects(d)?`/tiles/${a}/${e}/${i}.png`:"/tiles/null"},placeholder:!0});e.on("click",(function(a){const n=a.coordinate,o=e.getZoom(),l=i(e,n,o);t.fire("tileClick",{coordinate:{x:n.x,y:n.y},tileIndex:l})})),t.on("tileClick",(function(e){})),e.addLayer(t)}},7972:function(e,t,a){a.d(t,{A:function(){return r}});var n=a(2925);const o=["#42a7ff","#f6ff42","#ff5542","#3bcc62"],l=["normal","doubt","illegal","loitering"];function i(e){const t=e.getSymbol();t.markerWidth=20,t.markerHeight=40,t.markerDy=20,e.setSymbol(t),e.bringToFront()}function c(e){const t=e.getSymbol();t.markerWidth=10,t.markerHeight=20,t.markerDy=10,e.setSymbol(t),e.bringToBack()}function r(e,t){const a=new n.vK("vessel-layer").addTo(e);let r=null,s=null,u=[];function d({coordinate:e,target:n}){if(n.getId()!==s&&s){const e=a.getGeometryById(s);c(e)}s=n.getId(),t({coord:e,elements:n.getProperties()})}function m({target:e}){i(e)}function g({target:e}){s!==e.getId()&&c(e)}return{highlight:e=>{const t=a.getGeometryById(e);i(t)},normalize:e=>{s=null;const t=a.getGeometryById(e);c(t)},filter:e=>{u=e,r.forEach((t=>{const a=t.getProperties(),n=a.fnf_bool?1:0;e.includes(l[n])?t.show():t.hide()}))},changeDateTime:e=>{a.clear();const t=Array.from(new Map(e.map((e=>[e.vesselid,e]))).values());r=t.map((e=>{const t=e.fnf_bool?1:0;e.fnf_bool||console.log("False value data:",e);const i=new n.pH([e.longitude,e.latitude],{id:e.vesselid,properties:e,symbol:{markerType:"pie",markerFill:o[t],markerFillOpacity:1,markerLineColor:"#000000",markerLineWidth:1,markerLineOpacity:1,markerLineDasharray:[],markerWidth:10,markerHeight:20,markerDx:0,markerDy:10,markerOpacity:1,markerRotation:180-e.cog}}).addTo(a);return i.on("click",d),i.on("mouseenter",m),i.on("mouseout",g),u.length?u.includes(l[t])?i.show():i.hide():e.fnf_bool?i.show():i.hide(),i}))}}}},2003:function(e,t,a){a.d(t,{A:function(){return h}});var n=a(6768),o=a(5130),l=a(4232),i=a(144),c=a(5586);const r={key:0},s={class:"title d-flex a-i-center"},u={class:"list d-flex"},d=["id","onUpdate:modelValue"],m=["for"];var g={__name:"DistrictmapConfig",props:{show:{type:Boolean,require:!0}},emits:["districtmapconfig:change","districtmapconfig:selectall","districtmapconfig:unselectall"],setup(e,{emit:t}){const a=["#FF5733","#33FF57","#3357FF","#FF33A1","#33FFF5","#FFC300","#DAF7A6","#900C3F","#581845","#C70039","#900C3F","#FF5733","#1A5276","#229954","#AF7AC5","#F39C12","#2980B9","#1ABC9C","#2E4053","#7D3C98","#C0392B","#BDC3C7","#7F8C8D","#34495E","#E74C3C","#8E44AD","#2ECC71","#F1C40F","#3498DB","#E67E22","#16A085","#D35400","#AAB7B8","#ABB2B9","#E59866","#F5B041","#F7DC6F","#1F618D","#F0B27A","#EC7063"],g=e,v=t,f=(0,i.KR)([]);function h({target:e}){localStorage.setItem("districtmapConfig",JSON.stringify(f.value)),v("districtmapconfig:change",{name:e.id,show:e._modelValue})}function p(){f.value.forEach((e=>{e.show=!0})),localStorage.setItem("districtmapConfig",JSON.stringify(f.value)),v("districtmapconfig:selectall")}function k(){f.value.forEach((e=>{e.show=!1})),localStorage.setItem("districtmapConfig",JSON.stringify(f.value)),v("districtmapconfig:unselectall")}return(0,n.sV)((async()=>{const e=localStorage.getItem("districtmapConfig");f.value=e?JSON.parse(e):(await c.pW.list()).map((e=>({name:e,show:!0})))})),(e,t)=>{const i=(0,n.g2)("f-a-icon");return(0,n.uX)(),(0,n.Wv)(o.eB,{name:"slide"},{default:(0,n.k6)((()=>[g.show?((0,n.uX)(),(0,n.CE)("section",r,[(0,n.Lk)("div",s,[(0,n.bF)(i,{icon:"gear"}),(0,n.eW)(" 구역도 설정 ")]),(0,n.Lk)("div",{class:"all-tools d-flex a-i-center"},[(0,n.Lk)("button",{onClick:p},"전체 선택"),(0,n.Lk)("button",{onClick:k},"전체 해제")]),(0,n.Lk)("div",u,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.value,((e,i)=>((0,n.uX)(),(0,n.CE)("div",{key:e.name},[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:e.name,"onUpdate:modelValue":t=>e.show=t,onChange:h,onFocus:t[0]||(t[0]=e=>e.preventDefault())},null,40,d),[[o.lH,e.show]]),(0,n.Lk)("label",{class:(0,l.C4)([e.show?"checked":"","d-flex","j-c-center","a-i-center"]),for:e.name},[(0,n.eW)((0,l.v_)(e.name)+" ",1),(0,n.Lk)("div",{style:(0,l.Tr)({background:a[i],width:"10px",height:"10px",borderRadius:"5px",marginLeft:"5px"})},null,4)],10,m)])))),128))])])):(0,n.Q3)("",!0)])),_:1})}}},v=a(1241);const f=(0,v.A)(g,[["__scopeId","data-v-0a348c25"]]);var h=f},6598:function(e,t,a){a.r(t),a.d(t,{default:function(){return ne}});var n=a(6768),o=a(144),l=a(4232),i=a(5130),c=a(9798);const r=e=>((0,n.Qi)("data-v-e6217c6c"),e=e(),(0,n.jt)(),e),s={id:"toolbar",class:"d-flex"},u={class:"d-flex tools"},d={class:"districtmap-config d-flex"},m=r((()=>(0,n.Lk)("div",{class:"divider"},null,-1))),g={class:"section-list d-flex"},v=["onClick","disabled"],f=r((()=>(0,n.Lk)("div",{class:"divider"},null,-1))),h={class:"section-list d-flex"},p=["onClick"],k=r((()=>(0,n.Lk)("div",{class:"divider"},null,-1))),C={class:"filter-list d-flex"},y=["id","value"],F=["for"],w=r((()=>(0,n.Lk)("div",{class:"divider"},null,-1))),A={class:"section-list d-flex"},b=r((()=>(0,n.Lk)("button",{class:"direct-service"},"빠른 서비스 창",-1)));var D={__name:"ToolBar",emits:["section:change","trenchmap:change","filter:change","districtmapconfig:toggle"],setup(e,{emit:t}){const a=t,r=(0,o.KR)(""),D=[{name:"인천항"},{name:"부산항"},{name:"목포항"}];function _(e){r.value=e,a("section:change",e)}const E=(0,o.KR)(["doubt","illegal"]),L=[{name:"정상선박",value:"normal"},{name:"의심선박",value:"doubt"},{name:"불법선박",value:"illegal"},{name:"배회선박",value:"loitering"}];(0,n.wB)(E,(e=>{a("filter:change",e)}));const x=(0,o.KR)("big"),S=[{name:"대해구도",value:"big"},{name:"소해구도",value:"small"},{name:"없음",value:null}],B=(0,o.KR)(!1);function I(e){x.value=e,a("trenchmap:change",e)}return(e,t)=>((0,n.uX)(),(0,n.CE)("section",s,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>a("districtmapconfig:toggle"))},"구역도 설정")]),m,(0,n.Lk)("div",g,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(S,(e=>(0,n.Lk)("button",{key:e.name,onClick:t=>I(e.value),class:"trenchmap",disabled:x.value===e.value},(0,l.v_)(e.name),9,v))),64))]),f,(0,n.Lk)("div",h,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(D,(e=>(0,n.Lk)("button",{key:e.name,onClick:t=>_(e.name)},(0,l.v_)(e.name),9,p))),64))]),k,(0,n.Lk)("div",C,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(L,(a=>(0,n.Lk)("div",{key:a.name},[(0,n.bo)((0,n.Lk)("input",{type:"checkbox",id:a.name,"onUpdate:modelValue":t[1]||(t[1]=e=>E.value=e),value:a.value,onChange:t[2]||(t[2]=(...t)=>e.onChangeFilter&&e.onChangeFilter(...t))},null,40,y),[[i.lH,E.value]]),(0,n.Lk)("label",{class:"d-flex j-c-center a-i-center",for:a.name},(0,l.v_)(a.name),9,F)]))),64))]),w,(0,n.Lk)("div",A,[(0,n.Lk)("button",{style:{width:"120px"},onClick:t[3]||(t[3]=e=>B.value=!B.value),class:(0,l.C4)([B.value?"req-activate":""])},"의심선박 분류",2)])]),b,B.value?((0,n.uX)(),(0,n.Wv)(c.A,{key:0,title:"의심선박 분류 요청",type:"doubt","onReq:close":t[4]||(t[4]=e=>B.value=!1)})):(0,n.Q3)("",!0)]))}},_=a(1241);const E=(0,_.A)(D,[["__scopeId","data-v-e6217c6c"]]);var L=E,x=a(8910),S=a(4606),B=a(7972),I=a(5528),R=a(8544),T=a(9547),K=a(5586);const M={id:"map",class:"map"};var $={__name:"MainMap",emits:["info:show","data:load"],setup(e,{expose:t,emit:a}){const o=a;let l,i=null,c=null,r=null,s=null,u=null,d=null;function m({coord:e,elements:t,isChild:a}){i.animateTo({zoom:10,center:[e.x,e.y]},{duration:500,easing:"out"}),o("info:show",t,a)}(0,n.sV)((async()=>{i=(0,x.A)(),(0,S.A)(i),c=await(0,I.A)(i),r=await(0,R.A)(i),s=(0,B.A)(i,m),l=(0,T.A)(i)}));const g={"인천항":[126.6246844,37.4589868],"목포항":[126.383362,34.780277],"부산항":[129.0430982,35.1020946]};return t({changeCenter:e=>{i.animateTo({center:g[e],zoom:10},{duration:500,easing:"out"})},changeDatetime:async(e,t,a,n)=>{u=a,d=n;const l=await K.X_.getData(e,t);setTimeout((()=>{s.changeDateTime(l),o("data:load")}),100)},changeTrenchmap:e=>{c.change(e)},changeDistrictmapConfig:e=>{r.change(e)},onSelectAllDistrict:()=>{r.selectAll()},onUnselectAllDistrict:()=>{r.unselectAll()},changeFilter:e=>{s.filter(e)},highlight:e=>{s.highlight(e)},normalize:e=>{s.normalize(e),l.hide()},showTrajectory:async e=>{const t=await K.X_.getTrajectory(e,u.slice(0,8)+"000000",d.slice(0,8)+"000000"),a={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.map((e=>[e.longitude,e.latitude]))}};l.load(a),o("data:load")},hideTrajectory:()=>{l.hide()}}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",M))}};const W=(0,_.A)($,[["__scopeId","data-v-030d51b4"]]);var X=W,V=a(5017);const j=e=>((0,n.Qi)("data-v-161680f9"),e=e(),(0,n.jt)(),e),z={class:"range-selector"},O={class:"time-slider-wrap d-flex j-c-center a-i-center"},P={class:"current"},U=j((()=>(0,n.Lk)("datalist",{id:"tick"},[(0,n.Lk)("option",{value:"60"},"60")],-1))),H=0,J=144;var Q={__name:"DatetimeSelector",emits:["change:datetime"],setup(e,{emit:t}){const a=t,c=(0,o.KR)(),r=(0,o.KR)(new Date),s=(0,o.KR)(new Date),u=(0,o.KR)(new Date),d=(0,o.KR)(10),m=(0,n.EW)((()=>{const e=Math.floor(d.value/6).toString().padStart(2,0),t=d.value%6+"0";return`${e} : ${t}`}));function g(e,t){u.value=new Date("2024-03-10")}function v(){const e=u.value.getFullYear(),t=(u.value.getMonth()+1).toString().padStart(2,0),n=u.value.getDate().toString().padStart(2,0),o=(u.value.getDate()+1).toString().padStart(2,0),l=Math.floor(d.value/6).toString().padStart(2,0),i=d.value%6+"0",c=d.value%6+1+"0",r=`${e}${t}${n}${l}${i}00`,s=`${e}${t}${n}${l}${c}00`,m=`${e}${t}${n}000000`,g=`${e}${t}${o}000000`;a("change:datetime",r,s,m,g)}return(0,n.sV)((async()=>{const{min:e,max:t}=await K.X_.getMinMaxDate();r.value=new Date(e),s.value=new Date(t),g(r.value,s.value),v()})),(e,t)=>((0,n.uX)(),(0,n.CE)("div",z,[(0,n.bF)((0,o.R1)(V.A),{modelValue:u.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>u.value=e),v],"no-today":"",dark:"","auto-apply":"","year-first":"","enable-time-picker":!1,"week-start":"0",clearable:!1,placeholder:"Start Date Time",ui:{input:"date-picker__custom",calendar:"calendar__custom"},"min-date":r.value,"max-date":s.value},{month:(0,n.k6)((({value:e})=>[(0,n.eW)((0,l.v_)(e+1),1)])),"month-overlay-value":(0,n.k6)((({value:e})=>[(0,n.eW)((0,l.v_)(e+1),1)])),_:1},8,["modelValue","min-date","max-date"]),(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("input",{type:"range",list:"tick",ref_key:"sliderInput",ref:c,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),min:H,max:J,onChange:v},null,544),[[i.Jo,d.value]]),(0,n.Lk)("span",P,(0,l.v_)(m.value),1),U])]))}};const G=(0,_.A)(Q,[["__scopeId","data-v-161680f9"]]);var N=G,q=a(5944),Z=a(3002),Y=a(2003);const ee={class:"content"};var te={__name:"DoubtView",setup(e){const t=(0,o.KR)(),a=(0,o.KR)(),l=(0,o.KR)(!1),i=(0,o.KR)(!1),c=(0,o.KR)([]),r=(0,o.KR)({}),s=(0,o.KR)(!1);function u(e){t.value.changeCenter(e)}function d(e){t.value.changeTrenchmap(e)}function m(e){t.value.changeFilter(e)}function g(e,a,n,o){l.value=!0,t.value.changeDatetime(e,a,n,o)}function v(e){t.value.changeDistrictmapConfig(e)}function f(){t.value.onSelectAllDistrict()}function h(){t.value.onUnselectAllDistrict()}function p(e){r.value=e,t.value.hideTrajectory(),s.value=!0}function k(e){s.value=!1,c.value=[],t.value.normalize(e)}function C(e){l.value=!0,t.value.showTrajectory(e)}return(e,c)=>((0,n.uX)(),(0,n.CE)("main",null,[l.value?((0,n.uX)(),(0,n.Wv)((0,o.R1)(Z.A),{key:0})):(0,n.Q3)("",!0),(0,n.Lk)("div",ee,[(0,n.bF)((0,o.R1)(Y.A),{show:i.value,"onDistrictmapconfig:change":v,"onDistrictmapconfig:selectall":f,"onDistrictmapconfig:unselectall":h},null,8,["show"]),(0,n.bF)((0,o.R1)(L),{"onSection:change":u,"onTrenchmap:change":d,"onFilter:change":m,"onDistrictmapconfig:toggle":c[0]||(c[0]=e=>i.value=!i.value)}),(0,n.bF)((0,o.R1)(X),{ref_key:"map",ref:t,"onInfo:show":p,"onData:load":c[1]||(c[1]=e=>l.value=!1)},null,512),s.value?((0,n.uX)(),(0,n.Wv)((0,o.R1)(q.A),{key:0,ref_key:"vesselInfo",ref:a,vessel:r.value,"onInfo:close":k,"onInfo:highlight":t.value.highlight,"onInfo:normalize":t.value.normalize,"onInfo:trajectory":C},null,8,["vessel","onInfo:highlight","onInfo:normalize"])):(0,n.Q3)("",!0),(0,n.bF)((0,o.R1)(N),{"onChange:datetime":g})])]))}};const ae=(0,_.A)(te,[["__scopeId","data-v-1c015977"]]);var ne=ae}}]);
//# sourceMappingURL=61.754711be.js.map